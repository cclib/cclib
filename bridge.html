<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bridges to other packages &mdash; cclib 1.7.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/increase_max_width.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="Calculation methods" href="methods.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="contents.html" class="icon icon-home">
            cclib
          </a>
              <div class="version">
                1.7
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_install.html">How to install</a></li>
<li class="toctree-l1"><a class="reference internal" href="how_to_parse.html">How to parse and write</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Parsed data (version 1.7.2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_notes.html">Parsed data notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html">Calculation methods</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Bridges to other packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#horton">horton</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#becke-population-analysis">Becke Population Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hirshfeld-population-analysis">Hirshfeld Population Analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_dev.html">Development parsed data</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">cclib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Bridges to other packages</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/cclib/cclib/blob/master/doc/sphinx/bridge.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bridges-to-other-packages">
<span id="index-0"></span><h1>Bridges to other packages<a class="headerlink" href="#bridges-to-other-packages" title="Permalink to this heading"></a></h1>
<p>The following bridges in cclib allow using the parsed data to perform further analysis using other packages.</p>
<section id="horton">
<span id="index-1"></span><h2>horton<a class="headerlink" href="#horton" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="http://theochem.github.io/horton/2.1.1/">Horton</a> bridge in cclib supports conversion of cclib’s ccData object to horton’s IOData object and vice versa. This bridge is useful in performing additional population analyses using the data parsed using cclib.
Before invoking the bridge function, ccData object should be prepared first by reading in previous calculations, following the procedures introduced in <a class="reference external" href="how_to_parse.html">how to parse</a> section.
Then, <code class="docutils literal notranslate"><span class="pre">ccData</span></code> object can be passed into the bridge function <code class="docutils literal notranslate"><span class="pre">makehorton</span></code>. Following code block is an example that performs the conversion:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cclib.bridge.cclib2horton</span> <span class="kn">import</span> <span class="n">makehorton</span>
<span class="kn">from</span> <span class="nn">cclib.parser</span> <span class="kn">import</span> <span class="n">ccopen</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">ccopen</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">ht</span> <span class="o">=</span> <span class="n">makehorton</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>
</div>
<p>Converted IOData object can be used to run further analyses by referring to <a class="reference external" href="http://theochem.github.io/horton/2.1.1/">horton documentation</a>.</p>
<section id="becke-population-analysis">
<h3>Becke Population Analysis<a class="headerlink" href="#becke-population-analysis" title="Permalink to this heading"></a></h3>
<p>An example code below demonstrates how Becke charges can be calculated based on the script available on <a class="reference external" href="https://theochem.github.io/horton/2.1.0/user_postproc_aim.html#python-interface-to-the-partitioning-code">Python interface</a> section in horton documentation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cclib.method.density</span> <span class="kn">import</span> <span class="n">Density</span>
<span class="kn">from</span> <span class="nn">cclib.bridge.cclib2horton</span> <span class="kn">import</span> <span class="n">makehorton</span>
<span class="kn">from</span> <span class="nn">cclib.parser</span> <span class="kn">import</span> <span class="n">ccopen</span>

<span class="kn">from</span> <span class="nn">horton</span> <span class="kn">import</span> <span class="n">BeckeMolGrid</span><span class="p">,</span> <span class="n">getgobasis</span><span class="p">,</span> <span class="n">BeckeWPart</span>
<span class="kn">from</span> <span class="nn">horton.matrix.dense</span> <span class="kn">import</span> <span class="n">DenseTwoIndex</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">ccopen</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">ht</span> <span class="o">=</span> <span class="n">makehorton</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># Calculate density matrix using cclib</span>
<span class="n">dens</span> <span class="o">=</span> <span class="n">Density</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">dens</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
<span class="n">den</span> <span class="o">=</span> <span class="n">DenseTwoIndex</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">orb_alpha</span><span class="p">))</span>
<span class="n">den</span><span class="o">.</span><span class="n">_array</span> <span class="o">=</span> <span class="n">dens</span><span class="o">.</span><span class="n">density</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dens</span><span class="o">.</span><span class="n">density</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># Create integration grid for calculating Becke charges</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">BeckeMolGrid</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">pseudo_numbers</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;only&#39;</span><span class="p">)</span>

<span class="c1"># Define Gaussian basis set</span>
<span class="n">gob</span> <span class="o">=</span> <span class="n">get_gobasis</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;STO-3G&#39;</span><span class="p">)</span>

<span class="c1"># Partition charges</span>
<span class="n">wpart</span> <span class="o">=</span> <span class="n">BeckeWPart</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">pseudo_numbers</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">moldens</span><span class="p">,</span> <span class="n">local</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">wpart</span><span class="o">.</span><span class="n">do_charges</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wpart</span><span class="p">[</span><span class="s1">&#39;charges&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="hirshfeld-population-analysis">
<h3>Hirshfeld Population Analysis<a class="headerlink" href="#hirshfeld-population-analysis" title="Permalink to this heading"></a></h3>
<p>An example code below demonstrates how Hirshfeld charges can be calculated based on the script available on <a class="reference external" href="https://theochem.github.io/horton/2.1.0/user_postproc_aim.html#python-interface-to-the-partitioning-code">Python interface</a> section in horton documentation.
To calculate partial charges that require pro-atomic densities, follow the steps in <a class="reference external" href="https://theochem.github.io/horton/2.1.0/user_postproc_aim.html#horton-atomdb-py-build-a-pro-atom-database">Building proatomic database</a> section in horton documentation.
Then read in the densities as below to calculate Hirshfeld or Hirshfeld-like charges:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cclib.method.density</span> <span class="kn">import</span> <span class="n">Density</span>
<span class="kn">from</span> <span class="nn">cclib.bridge.cclib2horton</span> <span class="kn">import</span> <span class="n">makehorton</span>
<span class="kn">from</span> <span class="nn">cclib.parser</span> <span class="kn">import</span> <span class="n">ccopen</span>

<span class="kn">from</span> <span class="nn">horton</span> <span class="kn">import</span> <span class="n">BeckeMolGrid</span><span class="p">,</span> <span class="n">getgobasis</span><span class="p">,</span> <span class="n">HirshfeldWPart</span>
<span class="kn">from</span> <span class="nn">horton.matrix.dense</span> <span class="kn">import</span> <span class="n">DenseTwoIndex</span>
<span class="kn">from</span> <span class="nn">horton.part.proatomdb</span> <span class="kn">import</span> <span class="n">ProAtomDB</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">ccopen</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">ht</span> <span class="o">=</span> <span class="n">makehorton</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># Calculate density matrix using cclib</span>
<span class="n">dens</span> <span class="o">=</span> <span class="n">Density</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">dens</span><span class="o">.</span><span class="n">calculate</span><span class="p">()</span>
<span class="n">den</span> <span class="o">=</span> <span class="n">DenseTwoIndex</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">orb_alpha</span><span class="p">))</span>
<span class="n">den</span><span class="o">.</span><span class="n">_array</span> <span class="o">=</span> <span class="n">dens</span><span class="o">.</span><span class="n">density</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dens</span><span class="o">.</span><span class="n">density</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># Create integration grid</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">BeckeMolGrid</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">pseudo_numbers</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;only&#39;</span><span class="p">)</span>

<span class="c1"># Define Gaussian basis set</span>
<span class="n">gob</span> <span class="o">=</span> <span class="n">get_gobasis</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="s1">&#39;STO-3G&#39;</span><span class="p">)</span>

<span class="c1"># Read in pro-atomic density database</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">ProAtomDB</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s1">&#39;atoms.h5&#39;</span><span class="p">)</span>

<span class="c1"># Partition charges</span>
<span class="n">wpart</span> <span class="o">=</span> <span class="n">HirshfeldWPart</span><span class="p">(</span><span class="n">ht</span><span class="o">.</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">numbers</span><span class="p">,</span> <span class="n">ht</span><span class="o">.</span><span class="n">pseudo_numbers</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">moldens</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="n">wpart</span><span class="o">.</span><span class="n">do_charges</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">wpart</span><span class="p">[</span><span class="s1">&#39;charges&#39;</span><span class="p">])</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="methods.html" class="btn btn-neutral float-left" title="Calculation methods" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="development.html" class="btn btn-neutral float-right" title="Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2021, cclib Development Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>